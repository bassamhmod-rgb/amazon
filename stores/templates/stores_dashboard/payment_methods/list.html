{% load static %}

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹ â€“ {{ store.slug }}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="{% static 'css/base.css' %}" rel="stylesheet">

    <style>
        body {
            background: #f6f8fa;
            font-family: "Cairo", sans-serif;
        }

        .page-box {
            background:#fff;
            padding:22px;
            border-radius:14px;
            box-shadow:0 4px 14px rgba(0,0,0,0.08);
        }

        .table th {
            background:#f0f0f5;
            font-weight:700;
        }

        .badge-active { background:#0d6efd; }
        .badge-inactive { background:#6c757d; }

        .icon-thumb {
            width:40px;
            height:40px;
            object-fit:cover;
            border-radius:6px;
        }

        .percent-box {
            background:#eef9ff;
            border-left:4px solid #0d6efd;
            padding:12px 16px;
            border-radius:12px;
            margin-bottom:20px;
        }
    </style>
</head>

<body>

<div class="container mt-4">

    <h3 class="mb-3">ğŸ’³ Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹ â€“ <span class="text-primary">{{ store.slug }}</span></h3>

    <a href="/dashboard/{{ store.slug }}/settings/" class="btn btn-secondary mb-3">
        â† Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    </a>

    <div class="page-box">

        <!-- â­ Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„ÙƒÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØ¬Ø± ÙˆÙ„ÙŠØ³ Ù…Ù† Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹) -->
        <div class="percent-box d-flex justify-content-between align-items-center">
            <div>
                <strong>Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù„Ø¯ÙØ¹ Ø§Ù„Ù…Ø³Ø¨Ù‚:</strong>
                <span class="text-primary fw-bold">{{ store.payment_required_percentage }}%</span>
            </div>

            <a href="/dashboard/{{ store.slug }}/settings/" class="btn btn-sm btn-outline-primary">
                ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Ø³Ø¨Ø©
            </a>
        </div>

        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="m-0">Ù‚Ø§Ø¦Ù…Ø© Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹</h5>

            <a href="{% url 'stores:payment_methods_add' store.slug %}" 
               class="btn btn-primary">
                + Ø¥Ø¶Ø§ÙØ© Ø·Ø±ÙŠÙ‚Ø© Ø¬Ø¯ÙŠØ¯Ø©
            </a>
        </div>

        {% if methods %}
        <div class="table-responsive">

            <table class="table table-bordered align-middle text-center">
                <thead>
                    <tr>
                        <th>Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©</th>
                        <th>Ø§Ù„Ø§Ø³Ù…</th>
                        <th>Ø§Ù„Ù†ÙˆØ¹</th>
                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                        <th>Ø§Ù„ØªØ±ØªÙŠØ¨</th>
                        <th width="160">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                    </tr>
                </thead>

                <tbody>
                {% for m in methods %}
                    <tr>
                        <td>
                            {% if m.icon %}
                                <img src="{{ m.icon.url }}" class="icon-thumb">
                            {% else %}
                                <span class="text-muted">â€”</span>
                            {% endif %}
                        </td>

                        <td>{{ m.name }}</td>

                        <td>
                            {% if m.type == "cash" %} ÙƒØ§Ø´
                            {% elif m.type == "cod" %} Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…
                            {% elif m.type == "bank" %} ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ
                            {% elif m.type == "wallet" %} Ù…Ø­ÙØ¸Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©
                            {% elif m.type == "hawala" %} Ø­ÙˆØ§Ù„Ø©
                            {% else %} Ø£Ø®Ø±Ù‰
                            {% endif %}
                        </td>

                        <td>
                            {% if m.is_active %}
                                <span class="badge badge-active">Ù…ÙØ¹Ù‘Ù„</span>
                            {% else %}
                                <span class="badge badge-inactive">Ù…Ø¹Ø·Ù‘Ù„</span>
                            {% endif %}
                        </td>

                        <td>{{ m.order }}</td>

                        <td>
                            <a href="{% url 'stores:payment_methods_edit' store.slug m.id %}" 
                               class="btn btn-sm btn-outline-primary">ØªØ¹Ø¯ÙŠÙ„</a>

                            <a href="{% url 'stores:payment_methods_delete' store.slug m.id %}"
                               class="btn btn-sm btn-outline-danger"
                               onclick="return confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ');">
                               Ø­Ø°Ù
                            </a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>

        </div>

        {% else %}
            <p class="text-muted mt-3">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ø±Ù‚ Ø¯ÙØ¹ Ø¨Ø¹Ø¯. Ù‚Ù… Ø¨Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ø­Ø¯Ø©.</p>
        {% endif %}

    </div>

</div>

</body>
</html>
