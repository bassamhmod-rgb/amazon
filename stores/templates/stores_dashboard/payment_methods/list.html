{% load static %}

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">

    <!-- Ù…Ù‡Ù… Ù„Ù„Ø±ÙŠØ³Ø¨ÙˆÙ†Ø³ÙŠÙ -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹ â€“ {{ store.slug }}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">

    <style>
        body {
            background: #f7f9fc;
            font-family: "Cairo", sans-serif;
            overflow-x: hidden;
        }

        .settings-card {
            background: #fff;
            border-radius: 14px;
            padding: 22px;
            box-shadow: 0 4px 14px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }

        .icon-thumb {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            object-fit: cover;
        }

        .badge-active { background:#0d6efd; }
        .badge-inactive { background:#6c757d; }

        /* Ø¬Ø¯ÙˆÙ„ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ­Ø±ÙŠÙƒ */
        .table-scroll {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .table th {
            background:#f0f0f5;
            font-weight:700;
            white-space: nowrap;
        }

        .table td {
            white-space: nowrap;
            vertical-align: middle;
        }

        /* ===============================
           ğŸ“± Mobile Responsive
        ============================== */
        @media (max-width: 768px) {

            .container {
                max-width: 100%;
                padding-left: 12px;
                padding-right: 12px;
            }

            h2 {
                font-size: 1.2rem;
                text-align: center;
            }

            a.btn {
                width: 100%;
                margin-bottom: 8px;
            }

            .settings-card {
                padding: 16px;
            }

            .table th,
            .table td {
                font-size: 0.85rem;
            }

            .icon-thumb {
                width: 32px;
                height: 32px;
            }
        }
    </style>
</head>

<body>

<div class="container mt-4">

    <h2 class="mb-2">
        ğŸ’³ Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹ â€“ <span class="text-primary">{{ store.slug }}</span>
    </h2>

    <a href="/dashboard/{{ store.slug }}/settings/" class="btn btn-secondary mb-3">
        â† Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    </a>

    <div class="settings-card">

        <!-- Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© -->
        <div class="d-flex justify-content-between align-items-center flex-wrap gap-2 mb-4"
             style="background:#eef9ff; border-radius:12px; padding:12px 16px; border-right:4px solid #0d6efd;">

            <div>
                <strong>Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù„Ø¯ÙØ¹ Ø§Ù„Ù…Ø³Ø¨Ù‚:</strong>
                <span class="text-primary fw-bold">
                    {{ store.payment_required_percentage }}%
                </span>
            </div>

            <a href="/dashboard/{{ store.slug }}/settings/"
               class="btn btn-sm btn-outline-primary">
                ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Ø³Ø¨Ø©
            </a>
        </div>

        <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† + Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© -->
        <div class="d-flex justify-content-between align-items-center flex-wrap gap-2 mb-3">
            <h5 class="m-0">Ù‚Ø§Ø¦Ù…Ø© Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹</h5>

            <a href="{% url 'stores:payment_methods_add' store.slug %}"
               class="btn btn-primary">
                + Ø¥Ø¶Ø§ÙØ© Ø·Ø±ÙŠÙ‚Ø© Ø¬Ø¯ÙŠØ¯Ø©
            </a>
        </div>

        {% if methods %}
        <div class="table-scroll">

            <table class="table table-bordered text-center align-middle">
                <thead>
                    <tr>
                        <th>Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©</th>
                        <th>Ø§Ù„Ø§Ø³Ù…</th>
                        <th>Ø§Ù„Ù†ÙˆØ¹</th>
                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                        <th>Ø§Ù„ØªØ±ØªÙŠØ¨</th>
                        <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                    </tr>
                </thead>

                <tbody>
                {% for m in methods %}
                    <tr>
                        <td>
                            {% if m.icon %}
                                <img src="{{ m.icon.url }}" class="icon-thumb">
                            {% else %}
                                â€”
                            {% endif %}
                        </td>

                        <td class="fw-bold">{{ m.name }}</td>

                        <td>
                            {% if m.type == "cash" %}ÙƒØ§Ø´
                            {% elif m.type == "cod" %}Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…
                            {% elif m.type == "bank" %}ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ
                            {% elif m.type == "wallet" %}Ù…Ø­ÙØ¸Ø©
                            {% elif m.type == "hawala" %}Ø­ÙˆØ§Ù„Ø©
                            {% else %}Ø£Ø®Ø±Ù‰{% endif %}
                        </td>

                        <td>
                            {% if m.is_active %}
                                <span class="badge badge-active">Ù…ÙØ¹Ù‘Ù„</span>
                            {% else %}
                                <span class="badge badge-inactive">Ù…Ø¹Ø·Ù‘Ù„</span>
                            {% endif %}
                        </td>

                        <td>{{ m.order }}</td>

                        <td>
                            <a href="{% url 'stores:payment_methods_edit' store.slug m.id %}"
                               class="btn btn-sm btn-outline-primary">
                               ØªØ¹Ø¯ÙŠÙ„
                            </a>

                            <a href="{% url 'stores:payment_methods_delete' store.slug m.id %}"
                               class="btn btn-sm btn-outline-danger"
                               onclick="return confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ');">
                               Ø­Ø°Ù
                            </a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>

        </div>
        {% else %}
            <p class="text-muted text-center mt-3">
                Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ø±Ù‚ Ø¯ÙØ¹ Ø¨Ø¹Ø¯.
            </p>
        {% endif %}

    </div>

</div>

</body>
</html>
